<header class="header">
    <div class="logo-container">
        <img src="assets/logo.png" alt="Carexus Logo">
        <h1>Carexus</h1>
    </div>
    <button class="login-button" routerLink="/login">Login</button>
</header>

<div class="form-container">
    <h2 class="signup-text">Sign Up</h2>
    <form (ngSubmit)="onSubmit()">
        <!-- Display submit error if any -->
        <div *ngIf="submitError" class="error-message submit-error">
            {{ submitError }}
        </div>

        <div class="form-group">
            <label for="first-name" class="form-label">First Name</label>
            <input type="text" id="first-name" class="form-input" [ngClass]="{'error-input': errors['firstName']}"
                placeholder="Enter your First Name" [(ngModel)]="firstName" name="firstName" required>
            <div *ngIf="errors['firstName']" class="error-message">{{ errors['firstName'] }}</div>
        </div>

        <div class="form-group">
            <label for="last-name" class="form-label">Last Name</label>
            <input type="text" id="last-name" class="form-input" [ngClass]="{'error-input': errors['lastName']}"
                placeholder="Enter your Last Name" [(ngModel)]="lastName" name="lastName" required>
            <div *ngIf="errors['lastName']" class="error-message">{{ errors['lastName'] }}</div>
        </div>

        <div class="form-group">
            <label for="dob" class="form-label">Date of Birth</label>
            <input type="date" id="dob" class="form-input" [ngClass]="{'error-input': errors['dob']}"
                [(ngModel)]="dob" name="dob" required>
            <div *ngIf="errors['dob']" class="error-message">{{ errors['dob'] }}</div>
        </div>

        <div class="form-group">
            <label for="gender" class="form-label">Gender</label>
            <select id="gender" class="form-input" [ngClass]="{'error-input': errors['gender']}"
                [(ngModel)]="gender" name="gender" required>
                <option value="" disabled selected>Select your Gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
            <div *ngIf="errors['gender']" class="error-message">{{ errors['gender'] }}</div>
        </div>

        <div class="form-group">
            <label for="home-address" class="form-label">Home Address</label>
            <input type="text" id="home-address" class="form-input" [ngClass]="{'error-input': errors['homeAddress']}"
                placeholder="Enter your Home Address" [(ngModel)]="homeAddress" name="homeAddress" required>
            <div *ngIf="errors['homeAddress']" class="error-message">{{ errors['homeAddress'] }}</div>
        </div>

        <div class="form-group">
            <label for="contact-number" class="form-label">Contact Number</label>
            <input type="tel" id="contact-number" class="form-input" [ngClass]="{'error-input': errors['contactNumber']}"
                placeholder="Enter your Contact Number" [(ngModel)]="contactNumber" name="contactNumber" required>
            <div *ngIf="errors['contactNumber']" class="error-message">{{ errors['contactNumber'] }}</div>
        </div>

        <div class="form-group">
            <label for="email" class="form-label">Email</label>
            <input type="email" id="email" class="form-input" [ngClass]="{'error-input': errors['email']}"
                placeholder="Enter your Email" [(ngModel)]="email" name="email" required>
            <div *ngIf="errors['email']" class="error-message">{{ errors['email'] }}</div>
        </div>

        <div class="form-group">
            <label for="password" class="form-label">Password</label>
            <div class="password-input-container">
                <input [type]="showPassword ? 'text' : 'password'" 
                       id="password" 
                       class="form-input" 
                       [ngClass]="{'error-input': errors['password']}"
                       placeholder="Enter your Password" 
                       [(ngModel)]="password" 
                       name="password" 
                       required>
                <button type="button" 
                        class="toggle-password" 
                        (click)="togglePasswordVisibility('password')">
                    {{ showPassword ? 'üîí' : 'üëÅÔ∏è' }}
                </button>
            </div>
            <div *ngIf="password" class="password-strength">
                Password Strength: {{ checkPasswordStrength(password).feedback }}
            </div>
            <div *ngIf="errors['password']" class="error-message">{{ errors['password'] }}</div>
        </div>

        <div class="form-group">
            <label for="confirm-password" class="form-label">Confirm Password</label>
            <div class="password-input-container">
                <input [type]="showConfirmPassword ? 'text' : 'password'" 
                       id="confirm-password" 
                       class="form-input" 
                       [ngClass]="{'error-input': errors['confirmPassword']}"
                       placeholder="Confirm your Password" 
                       [(ngModel)]="confirmPassword" 
                       name="confirmPassword" 
                       required>
                <button type="button" 
                        class="toggle-password" 
                        (click)="togglePasswordVisibility('confirmPassword')">
                    {{ showConfirmPassword ? 'üîí' : 'üëÅÔ∏è' }}
                </button>
            </div>
            <div *ngIf="errors['confirmPassword']" class="error-message">{{ errors['confirmPassword'] }}</div>
        </div>

        <div class="form-group terms-container">
            <label class="terms-label">
                <input type="checkbox" 
                       [(ngModel)]="termsAccepted" 
                       name="terms" 
                       required>
                I accept the <a href="/terms" target="_blank">Terms and Conditions</a>
            </label>
            <div *ngIf="errors['terms']" class="error-message">{{ errors['terms'] }}</div>
        </div>

        <button type="submit" class="form-register">Register</button>
    </form>
</div>
